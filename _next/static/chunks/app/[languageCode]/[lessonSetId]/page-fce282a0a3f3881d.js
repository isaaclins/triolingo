(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{9606:function(e,t,r){Promise.resolve().then(r.bind(r,1882)),Promise.resolve().then(r.t.bind(r,2972,23))},1882:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437),l=r(2265),s=r(7648),o=r(9376),a=r(972);let c=e=>{let t;let r=[],l=0,s=/\[([^\]]+)\]\(([^)]+)\)/g;for(;null!==(t=s.exec(e));){t.index>l&&r.push(e.substring(l,t.index));let o=t[1],a=t[2];r.push((0,n.jsx)("span",{className:"hoverable-word","data-definition":a,children:o},"".concat(o,"-").concat(t.index))),l=s.lastIndex}return l<e.length&&r.push(e.substring(l)),r.length>0?r:[e]};function i(e){let{initialLessonData:t,initialLanguageDetails:r,initialLessonSetMeta:i,languageCode:d}=e,u=(0,o.useRouter)(),{incrementCorrect:x,incrementIncorrect:b}=(0,a.T)(),[h,g]=(0,l.useState)(t),[m,f]=(0,l.useState)(r),[v,p]=(0,l.useState)(i),[j,N]=(0,l.useState)(0),[y,w]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),[D,O]=(0,l.useState)(""),I=null==h?void 0:h.lessons[j],L=h&&h.lessons.length>0?(j+1)/h.lessons.length*100:0,P=e=>{S||(w(e),(null==I?void 0:I.type)!=="fill-blank"&&O(e))};if(!h||!I||!m||!v)return(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD14"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-700",children:"Lesson content is unavailable."}),(0,n.jsx)(s.default,{href:"/".concat(d),className:"mt-6 inline-block text-blue-500 hover:text-blue-600 font-medium",children:"← Back to Lesson Selection"})]});let _=c(I.question);return(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,n.jsx)("span",{children:v.title}),(0,n.jsxs)("span",{children:["Question ",j+1," of ",h.lessons.length]})]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,n.jsx)("div",{className:"bg-green-500 rounded-full transition-all duration-300 ease-out h-3",style:{width:"".concat(L,"%")}})})]}),S?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-7xl mb-5 ".concat(k?"animate-bounce":"animate-shake"),children:k?"\uD83C\uDF89":"\uD83D\uDE1E"}),(0,n.jsx)("h2",{className:"text-3xl font-bold mb-3 ".concat(k?"text-green-600":"text-red-600"),children:k?"Correct!":"Incorrect"}),!k&&(0,n.jsxs)("p",{className:"text-gray-700 text-lg mb-1",children:["Correct answer:"," ",(0,n.jsx)("span",{className:"font-bold text-green-600",children:I.correct})]}),k&&(0,n.jsx)("p",{className:"text-gray-700 text-lg mb-6",children:"+10 XP earned!"}),(0,n.jsx)("button",{onClick:()=>{C(!1),w(""),O(""),h&&j<h.lessons.length-1?N(j+1):u.push("/".concat(d))},className:"w-full max-w-xs mx-auto mt-6 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3.5 px-8 rounded-xl transition-all duration-200 text-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",children:j<h.lessons.length-1?"CONTINUE":"COMPLETE LESSON"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)(s.default,{href:"/".concat(d),className:"text-blue-500 hover:text-blue-600 font-medium text-sm",children:["← Back to Lessons (",m.name,")"]}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("span",{className:"text-xl",children:m.flag})})]}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-8 text-center min-h-[60px]",children:_.map((e,t)=>(0,n.jsx)(l.Fragment,{children:e},t))}),"multiple-choice"===I.type&&I.options&&(0,n.jsx)("div",{className:"space-y-3",children:I.options.map((e,t)=>(0,n.jsx)("button",{onClick:()=>P(e),disabled:S,className:"w-full p-4 text-left rounded-xl border-2 transition-all duration-200 disabled:opacity-75 disabled:cursor-not-allowed\n                                        ".concat(y!==e||S?"border-gray-200 hover:border-gray-300 hover:bg-gray-50":"border-blue-500 bg-blue-50 ring-2 ring-blue-400","\n                                        ").concat(S&&e===I.correct?"border-green-500 bg-green-50 text-green-700 font-semibold":"","\n                                        ").concat(S&&y===e&&e!==I.correct?"border-red-500 bg-red-50 text-red-700":"","\n                                    "),children:(0,n.jsx)("span",{className:"text-lg font-medium",children:e})},t))}),"fill-blank"===I.type&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("input",{type:"text",value:D,onChange:e=>{S||(O(e.target.value),w(e.target.value))},disabled:S,placeholder:"Type your answer here...",className:"w-full p-4 text-lg rounded-xl border-2 border-gray-300 focus:border-blue-500 focus:ring-blue-500 outline-none transition-colors disabled:opacity-75 disabled:bg-gray-50"})}),(0,n.jsx)("button",{onClick:()=>{if(!I)return;let e=("fill-blank"===I.type?D.trim():y).toLowerCase()===I.correct.toLowerCase();E(e),C(!0),e?x(d):b(d)},disabled:!y||S,className:"w-full mt-8 py-3.5 rounded-xl font-bold text-lg transition-all duration-200 text-white\n                            ".concat(!y||S?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 hover:bg-green-600","\n                        "),children:"CHECK"})]})]})}},972:function(e,t,r){"use strict";r.d(t,{ScoreProvider:function(){return o},T:function(){return a}});var n=r(7437),l=r(2265);let s=(0,l.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,l.useState)({});return(0,l.useEffect)(()=>{let e=localStorage.getItem("languageScores");if(e)try{o(JSON.parse(e))}catch(e){console.error("Failed to parse scores from localStorage",e),localStorage.removeItem("languageScores")}},[]),(0,l.useEffect)(()=>{Object.keys(r).length>0&&localStorage.setItem("languageScores",JSON.stringify(r))},[r]),(0,n.jsx)(s.Provider,{value:{scores:r,incrementCorrect:e=>{o(t=>{var r,n;return{...t,[e]:{correct:((null===(r=t[e])||void 0===r?void 0:r.correct)||0)+1,incorrect:(null===(n=t[e])||void 0===n?void 0:n.incorrect)||0}}})},incrementIncorrect:e=>{o(t=>{var r,n;return{...t,[e]:{correct:(null===(r=t[e])||void 0===r?void 0:r.correct)||0,incorrect:((null===(n=t[e])||void 0===n?void 0:n.incorrect)||0)+1}}})},getScore:e=>r[e]||{correct:0,incorrect:0}},children:t})},a=()=>{let e=(0,l.useContext)(s);if(void 0===e)throw Error("useScore must be used within a ScoreProvider");return e}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=9606)}),_N_E=e.O()}]);